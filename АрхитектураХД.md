# Data Vault 2.0: –ë–æ–µ–≤–æ–π ETL-–ø–∞—Ç—Ç–µ—Ä–Ω –¥–ª—è –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö

> –ò–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–∞—è, –∞—É–¥–∏—Ä—É–µ–º–∞—è, –∏–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª—å–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –∏–∑–º–µ—Ä–µ–Ω–∏–π —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –ø–æ–ª–Ω–æ–π –∏—Å—Ç–æ—Ä–∏–∏ (SCD2) –ø–æ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ Raw Data Vault.  
> –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –Ω–∞ Greenplum + PostgreSQL. –ë–µ–∑ –≤–Ω–µ—à–Ω–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π.

[![–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞](docs/architecture.png)](docs/architecture.md)

## üéØ –ó–∞—á–µ–º —ç—Ç–æ –Ω—É–∂–Ω–æ
- –†–µ—à–∞–µ—Ç –∑–∞–¥–∞—á—É **—Ö—Ä–∞–Ω–µ–Ω–∏—è –∏—Å—Ç–æ—Ä–∏–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–π**, –¥–∞–∂–µ –µ—Å–ª–∏ –∏—Å—Ç–æ—á–Ω–∏–∫ –µ—ë –Ω–µ –≤–µ–¥—ë—Ç
- –ì–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç **–æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –¥—É–±–ª–µ–π** –ø—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–º –∑–∞–ø—É—Å–∫–µ
- –û–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç **–ø–æ–ª–Ω—ã–π –∞—É–¥–∏—Ç**: —Å–∫–æ–ª—å–∫–æ —Å—Ç—Ä–æ–∫, –∫–æ–≥–¥–∞, —Å –∫–∞–∫–∏–º–∏ –æ—à–∏–±–∫–∞–º–∏
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç **–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É enterprise-—É—Ä–æ–≤–Ω—è** (Data Vault 2.0)

## üèóÔ∏è –û–±–∑–æ—Ä –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã
- **–ò—Å—Ç–æ—á–Ω–∏–∫**: PostgreSQL (OLTP, —Ç–∞–±–ª–∏—Ü—ã `dev.clients` –∏ `dev.clients_history`)
- **Staging**: –≤–Ω–µ—à–Ω—è—è —Ç–∞–±–ª–∏—Ü–∞ –≤ Greenplum —á–µ—Ä–µ–∑ PXF
- **Raw Data Vault**:
  - `h_clients` ‚Äî Hub (—É—Å—Ç–æ–π—á–∏–≤—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä)
  - `hs_clients` ‚Äî Satellite (–∞—Ç—Ä–∏–±—É—Ç—ã, —Ç–æ–ª—å–∫–æ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ)
- **–í–∏—Ç—Ä–∏–Ω—ã**:
  - –ê–∫—Ç—É–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ (`dm.clients_current`)
  - –ü–æ–ª–Ω–∞—è –∏—Å—Ç–æ—Ä–∏—è (`dm.clients_history`)

> üîç –ü–æ–¥—Ä–æ–±–Ω–∞—è —Å—Ö–µ–º–∞ –∏ –ø–æ—è—Å–Ω–µ–Ω–∏—è: [–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ](docs/architecture.md)

## ‚ñ∂Ô∏è –ö–∞–∫ –∑–∞–ø—É—Å—Ç–∏—Ç—å
1. –°–æ–∑–¥–∞—Ç—å —Å—Ö–µ–º—ã –∏ —Ç–∞–±–ª–∏—Ü—ã:
   ```sql
   \i src/ddl/greenplum/01_create_schemas.sql
   \i src/ddl/greenplum/02_create_rdv_tables.sql
   \i src/ddl/greenplum/03_create_etl_functions.sql
