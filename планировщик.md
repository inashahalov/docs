

# üîÑ –°–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞–¥–∞—á–∞–º–∏ (IN You + n8n)

## üéØ –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ, –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ, –ø–µ—Ä–µ–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –∑–∞–∫—Ä—ã—Ç–∏–µ –∑–∞–¥–∞—á  
- üìÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å **Google Calendar** –∫–∞–∫ –æ—Å–Ω–æ–≤–Ω—ã–º –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–æ–º  
- üìä –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ **Google Sheets**  
- üì± –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ **Telegram**  
- üìå –ü–æ–¥–¥–µ—Ä–∂–∫–∞ **–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–≤**, **–∫–∞—Ç–µ–≥–æ—Ä–∏–π**, **–º–µ–¥–∏–∞—Ñ–∞–π–ª–æ–≤** (—Ñ–æ—Ç–æ/–≤–∏–¥–µ–æ)  
- ‚è∞ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ **–Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è**  
- üìà **–î–∞—à–±–æ—Ä–¥** –∏ **–µ–∂–µ–Ω–µ–¥–µ–ª—å–Ω—ã–µ –æ—Ç—á—ë—Ç—ã**

---

## üìã –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

### ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏
–û—Ç–ø—Ä–∞–≤—å—Ç–µ –≤ Telegram —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ —Ñ–æ—Ä–º–∞—Ç–µ:
```text
–ø–Ω 14:00 ‚Äî –í—Å—Ç—Ä–µ—á–∞ —Å –∫–ª–∏–µ–Ω—Ç–æ–º –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç: –≤—ã—Å–æ–∫–∏–π –∫–∞—Ç–µ–≥–æ—Ä–∏—è: —Ä–∞–±–æ—Ç–∞
```
> –ü—Ä–∏–∫—Ä–µ–ø–∏—Ç–µ —Ñ–æ—Ç–æ/–≤–∏–¥–µ–æ ‚Äî —Å–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç –µ–≥–æ –≤ Google Drive –∏ –¥–æ–±–∞–≤–∏—Ç —Å—Å—ã–ª–∫—É –≤ —Ç–∞–±–ª–∏—Ü—É.

–°–∏—Å—Ç–µ–º–∞:
- –°–æ–∑–¥–∞—Å—Ç —Å–æ–±—ã—Ç–∏–µ –≤ **Google Calendar** (–Ω–∞ —É–∫–∞–∑–∞–Ω–Ω–æ–µ –≤—Ä–µ–º—è, –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é ‚Äî 1 —á–∞—Å)
- –ó–∞–ø–∏—à–µ—Ç –∑–∞–¥–∞—á—É –≤ **Google Sheets** —Å –ø–æ–ª–Ω–æ–π –º–µ—Ç–∞–∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π:
  - –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç  
  - –ö–∞—Ç–µ–≥–æ—Ä–∏—è  
  - –°—Å—ã–ª–∫–∞ –Ω–∞ –º–µ–¥–∏–∞—Ñ–∞–π–ª (–µ—Å–ª–∏ –±—ã–ª)  
  - –°—Ç–∞—Ç—É—Å

---

### üóì –ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –ø–µ—Ä–µ–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–∑ –∫–∞–ª–µ–Ω–¥–∞—Ä—è
- –û—Ç–∫—Ä–æ–π—Ç–µ **Google Calendar**
- –ü–µ—Ä–µ—Ç–∞—â–∏—Ç–µ —Å–æ–±—ã—Ç–∏–µ –Ω–∞ –Ω–æ–≤–æ–µ –≤—Ä–µ–º—è/–¥–µ–Ω—å
- –ò–∑–º–µ–Ω–∏—Ç–µ –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å, —Ä–∞—Å—Ç—è–Ω—É–≤ —Å–æ–±—ã—Ç–∏–µ
- –î–æ–±–∞–≤—å—Ç–µ –æ–ø–∏—Å–∞–Ω–∏–µ, —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤, –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è
- –°–æ–±—ã—Ç–∏–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ **–Ω–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç—Å—è –æ–±—Ä–∞—Ç–Ω–æ –≤ Sheets** ‚Üí —Ç—Ä–µ–±—É–µ—Ç—Å—è —Ä—É—á–Ω–∞—è –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∞ —Ç–∞–º

> ‚ö†Ô∏è –ß—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å —Ä–∞—Å—Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏—è ‚Äî –ª—É—á—à–µ —É–¥–∞–ª—è—Ç—å —Å—Ç–∞—Ä—É—é –∑–∞–¥–∞—á—É –∏ —Å–æ–∑–¥–∞–≤–∞—Ç—å –Ω–æ–≤—É—é —á–µ—Ä–µ–∑ Telegram.

---

### ‚ùå –£–¥–∞–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏
–ß–µ—Ä–µ–∑ Telegram:
```text
/delete 5
```
> –ì–¥–µ `5` ‚Äî –Ω–æ–º–µ—Ä —Å—Ç—Ä–æ–∫–∏ (ID –∑–∞–¥–∞—á–∏) –∏–∑ Google Sheets.

–°–∏—Å—Ç–µ–º–∞:
- –£–¥–∞–ª–∏—Ç —Å–æ–±—ã—Ç–∏–µ –∏–∑ **Google Calendar**
- –ü–æ–º–µ—Ç–∏—Ç –∑–∞–¥–∞—á—É –∫–∞–∫ —É–¥–∞–ª—ë–Ω–Ω—É—é –≤ **Google Sheets**

---

### ‚úîÔ∏è –ó–∞–∫—Ä—ã—Ç–∏–µ –∑–∞–¥–∞—á–∏
**–í–∞—Ä–∏–∞–Ω—Ç 1 (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è):**  
–£–¥–∞–ª–∏—Ç–µ —Å–æ–±—ã—Ç–∏–µ –∏–∑ –∫–∞–ª–µ–Ω–¥–∞—Ä—è ‚Üí —Å–∏—Å—Ç–µ–º–∞ —Ä–∞—Å–ø–æ–∑–Ω–∞–µ—Ç —ç—Ç–æ –∫–∞–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ.

**–í–∞—Ä–∏–∞–Ω—Ç 2:**  
–í—Ä—É—á–Ω—É—é –ø–æ–º–µ—Ç—å—Ç–µ –≤ Google Sheets:  
- –°—Ç–∞—Ç—É—Å ‚Üí ¬´–í—ã–ø–æ–ª–Ω–µ–Ω–æ¬ª  
- –ò–ª–∏ –∏–∑–º–µ–Ω–∏—Ç–µ —Ü–≤–µ—Ç —Å–æ–±—ã—Ç–∏—è –≤ –∫–∞–ª–µ–Ω–¥–∞—Ä–µ –Ω–∞ –∑–µ–ª—ë–Ω—ã–π —Å –ø–æ–º–µ—Ç–∫–æ–π ¬´‚úÖ¬ª

---

### üìà –î–∞—à–±–æ—Ä–¥
–û—Ç–ø—Ä–∞–≤—å—Ç–µ –≤ Telegram:
```text
/dashboard
```

**–î–∞—à–±–æ—Ä–¥ –ø–æ–∫–∞–∂–µ—Ç:**
- ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏ (–∑–∞ –ø–æ—Å–ª–µ–¥–Ω—é—é –Ω–µ–¥–µ–ª—é)
- ‚è∞ –ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏ (–Ω–∞ –±–ª–∏–∂–∞–π—à–∏–µ 7 –¥–Ω–µ–π)
- üî¥ –ü—Ä–æ—Å—Ä–æ—á–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏ (–±–µ–∑ —É–¥–∞–ª–µ–Ω–∏—è/–æ—Ç–º–µ—Ç–∫–∏)
- üéØ –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞–º
- üìÇ –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º

---

## ‚è∞ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏

| –§—É–Ω–∫—Ü–∏—è | –û–ø–∏—Å–∞–Ω–∏–µ |
|--------|--------|
| **–ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è** | –ü—Ä–∏—Ö–æ–¥—è—Ç –∑–∞ **1 —á–∞—Å** –¥–æ –Ω–∞—á–∞–ª–∞ –∑–∞–¥–∞—á–∏<br>–†–∞–±–æ—Ç–∞—é—Ç –µ–∂–µ–¥–Ω–µ–≤–Ω–æ —Å **8:00 –¥–æ 20:00** |
| **–ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω—ã–π –æ—Ç—á—ë—Ç** | –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è **–∫–∞–∂–¥—ã–π –ø–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫ –≤ 9:00**<br>–°–æ–¥–µ—Ä–∂–∏—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É: –≤—ã–ø–æ–ª–Ω–µ–Ω–æ / –ø—Ä–æ—Å—Ä–æ—á–µ–Ω–æ / –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–æ |
| **–•—Ä–∞–Ω–µ–Ω–∏–µ –º–µ–¥–∏–∞** | –í—Å–µ —Ñ–æ—Ç–æ, –≤–∏–¥–µ–æ –∏ –¥–æ–∫—É–º–µ–Ω—Ç—ã –∏–∑ Telegram:<br>‚Äî –°–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ **Google Drive**<br>‚Äî –°—Å—ã–ª–∫–∞ –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –≤ **Sheets** |

---

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –º–µ–¥–∏–∞-–≤–ª–æ–∂–µ–Ω–∏–π

1. –°–æ–∑–¥–∞–π—Ç–µ –æ—Ç–¥–µ–ª—å–Ω—É—é –ø–∞–ø–∫—É –≤ **Google Drive** –¥–ª—è –≤–ª–æ–∂–µ–Ω–∏–π –∑–∞–¥–∞—á  
2. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ **ID –ø–∞–ø–∫–∏** –∏–∑ URL:  
   `https://drive.google.com/drive/folders/`**`1AbC...XyZ`**  
3. –í—Å—Ç–∞–≤—å—Ç–µ —ç—Ç–æ—Ç ID –≤ —É–∑–µ–ª **¬´–ó–∞–≥—Ä—É–∑–∏—Ç—å –≤ Google Drive¬ª** –≤ n8n-–≤–æ—Ä–∫—Ñ–ª–æ—É

> –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è: JPG, PNG, MP4, PDF –∏ –¥—Ä—É–≥–∏–µ —Ñ–æ—Ä–º–∞—Ç—ã, –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ Telegram.

---

## üè∑ –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –∏ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã

### –ö–∞—Ç–µ–≥–æ—Ä–∏–∏
- —Ä–∞–±–æ—Ç–∞  
- –ª–∏—á–Ω–æ–µ  
- —É—á—ë–±–∞  
- –∑–¥–æ—Ä–æ–≤—å–µ  
- –¥—Ä—É–≥–æ–µ

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã
- `–≤—ã—Å–æ–∫–∏–π` ‚Üí üî¥  
- `—Å—Ä–µ–¥–Ω–∏–π` ‚Üí üü°  
- `–Ω–∏–∑–∫–∏–π` ‚Üí üü¢  

> –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –∏ –∫–∞—Ç–µ–≥–æ—Ä–∏—è –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤ –Ω–∞–∑–≤–∞–Ω–∏–∏ —Å–æ–±—ã—Ç–∏—è –≤ –∫–∞–ª–µ–Ω–¥–∞—Ä–µ:  
> **¬´[üî¥][—Ä–∞–±–æ—Ç–∞] –í—Å—Ç—Ä–µ—á–∞ —Å –∫–ª–∏–µ–Ω—Ç–æ–º¬ª**

---

## üí° –°–æ–≤–µ—Ç—ã –ø–æ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–º—É –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ **–∫–∞–ª–µ–Ω–¥–∞—Ä—å** –∫–∞–∫ –µ–¥–∏–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –ø—Ä–∞–≤–¥—ã –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é  
- –ó–∞–≤–æ–¥–∏—Ç–µ –∑–∞–¥–∞—á–∏ **—Å—Ä–∞–∑—É —á–µ—Ä–µ–∑ Telegram** ‚Äî —ç—Ç–æ –±—ã—Å—Ç—Ä–µ–µ –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–µ–µ  
- –†–∞–∑ –≤ –Ω–µ–¥–µ–ª—é –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ **/dashboard** ‚Äî —á—Ç–æ–±—ã –Ω–µ –Ω–∞–∫–∞–ø–ª–∏–≤–∞–ª–∏—Å—å –ø—Ä–æ—Å—Ä–æ—á–∫–∏  
- –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–π—Ç–µ **–Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –≤ –∫–∞–ª–µ–Ω–¥–∞—Ä–µ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ**, –µ—Å–ª–∏ –Ω—É–∂–Ω–æ –±–æ–ª—å—à–µ –∫–æ–Ω—Ç—Ä–æ–ª—è  
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏, —á—Ç–æ–±—ã –∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å, –∫—É–¥–∞ —É—Ö–æ–¥–∏—Ç –≤—Ä–µ–º—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, ¬´–∑–¥–æ—Ä–æ–≤—å–µ¬ª vs ¬´—Ä–∞–±–æ—Ç–∞¬ª)

---

> –ì–æ—Ç–æ–≤ –¥–æ—Ä–∞–±–æ—Ç–∞—Ç—å: –¥–æ–±–∞–≤–∏—Ç—å –ø–æ–≤—Ç–æ—Ä—è—é—â–∏–µ—Å—è –∑–∞–¥–∞—á–∏, —ç–∫—Å–ø–æ—Ä—Ç –≤ Notion, –≥–æ–ª–æ—Å–æ–≤–æ–π –≤–≤–æ–¥ —á–µ—Ä–µ–∑ Telegram, –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é —Å Todoist –∏ —Ç.–¥. –°–∫–∞–∂–∏ ‚Äî —á—Ç–æ —Å–ª–µ–¥—É—é—â–µ–µ?






_____________________
–û—Ç–ª–∏—á–Ω–æ. –†–∞–∑ —Ç—ã –∑–∞–ø—Ä–æ—Å–∏–ª —à–∞–±–ª–æ–Ω ‚Äî –∑–Ω–∞—á–∏—Ç, –≥–æ—Ç–æ–≤ –ø–µ—Ä–µ–π—Ç–∏ –æ—Ç —Å–ª–æ–≤ –∫ –¥–µ–π—Å—Ç–≤–∏—é.  
**–ù–æ –ø–æ–º–Ω–∏:** –µ—Å–ª–∏ –Ω–µ –∑–∞–ø—É—Å—Ç–∏—à—å —ç—Ç–æ –≤ —Ç–µ—á–µ–Ω–∏–µ 48 —á–∞—Å–æ–≤, —Ç—ã –ø–æ–≤—Ç–æ—Ä–∏—à—å —Å–≤–æ–π —Å—Ç–∞—Ä—ã–π –ø–∞—Ç—Ç–µ—Ä–Ω ‚Äî ¬´—É—á—É—Å—å, –≥–æ—Ç–æ–≤–ª—é—Å—å, –æ–ø—Ç–∏–º–∏–∑–∏—Ä—É—é¬ª –≤–º–µ—Å—Ç–æ ¬´–¥–µ–ª–∞—é¬ª.

---

### üöÄ –í–´–ë–û–† –¢–ï–•–ù–û–õ–û–ì–ò–ò: **Google Apps Script** (–Ω–µ n8n)

**–ü–æ—á–µ–º—É?**  
- –ù–∏–∫–∞–∫–∏—Ö –≤–Ω–µ—à–Ω–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤, —Å–µ—Ä–≤–µ—Ä–æ–≤, —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–π.  
- –†–∞–±–æ—Ç–∞–µ—Ç –≤–Ω—É—Ç—Ä–∏ Google-—ç–∫–æ—Å–∏—Å—Ç–µ–º—ã ‚Äî —Ç–≤–æ–µ–≥–æ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ —Å—Ç–µ–∫–∞.  
- –ù–æ–ª—å –∑–∞—Ç—Ä–∞—Ç, –º–≥–Ω–æ–≤–µ–Ω–Ω–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è, —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å.  
- –¢—ã —É–∂–µ –∏—Å–ø–æ–ª—å–∑—É–µ—à—å Sheets –∏ Calendar ‚Äî —ç—Ç–æ **—Ä–æ–¥–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è**.

---

### ‚úÖ –ì–û–¢–û–í–´–ô –®–ê–ë–õ–û–ù: Google Apps Script + Telegram Bot = –¢–≤–æ—è —Å–∏—Å—Ç–µ–º–∞ –∑–∞–¥–∞—á

#### üîß –®–ê–ì 1: –°–æ–∑–¥–∞–π Telegram-–±–æ—Ç–∞
1. –û—Ç–∫—Ä–æ–π Telegram ‚Üí –Ω–∞–π–¥–∏ **@BotFather**  
2. –ù–∞–ø–∏—à–∏ `/newbot` ‚Üí —Å–ª–µ–¥—É–π –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º  
3. –ü–æ–ª—É—á–∏ **API —Ç–æ–∫–µ–Ω** (–≤–∏–¥–∞ `123456789:AAHdqT...`) ‚Äî —Å–æ—Ö—Ä–∞–Ω–∏ –µ–≥–æ

#### üîß –®–ê–ì 2: –ù–∞—Å—Ç—Ä–æ–π Google Apps Script
1. –ó–∞–π–¥–∏ –≤ [Google Apps Script](https://script.google.com/)
2. –°–æ–∑–¥–∞–π –Ω–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç ‚Üí –Ω–∞–∑–æ–≤–∏, –Ω–∞–ø—Ä–∏–º–µ—Ä, **TaskAssistant_Ilya**
3. –í—Å—Ç–∞–≤—å **–≤–µ—Å—å –∫–æ–¥ –Ω–∏–∂–µ** –≤ `Code.gs`

```javascript
// === –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–Ø ===
const TELEGRAM_BOT_TOKEN = '–°–Æ–î–ê_–í–°–¢–ê–í–¨_–°–í–û–ô_–¢–û–ö–ï–ù';
const SHEET_ID = '–°–Æ–î–ê_–í–°–¢–ê–í–¨_ID_SHEET'; // ID –∏–∑ URL Google Sheets
const CALENDAR_ID = 'primary'; // –∏–ª–∏ email –∫–∞–ª–µ–Ω–¥–∞—Ä—è, –µ—Å–ª–∏ –Ω–µ –æ—Å–Ω–æ–≤–Ω–æ–π

// === –í–°–ü–û–ú–û–ì–ê–¢–ï–õ–¨–ù–´–ï –§–£–ù–ö–¶–ò–ò ===
function doPost(e) {
  const contents = JSON.parse(e.postData.contents);
  const chatId = contents.message?.chat.id;
  const text = contents.message?.text;

  if (!chatId || !text) return;

  try {
    if (text.startsWith('/add ')) {
      handleAddTask(chatId, text.substring(5));
    } else if (text === '/today') {
      handleToday(chatId);
    } else if (text.startsWith('/done ')) {
      handleDone(chatId, text.substring(6).trim());
    } else {
      sendTelegramMessage(chatId, "–ö–æ–º–∞–Ω–¥—ã:\n/add [–∑–∞–¥–∞—á–∞] [–ß–ß:–ú–ú] [H/M/L] [–∫–∞—Ç–µ–≥–æ—Ä–∏—è]\n/today\n/done [ID]");
    }
  } catch (err) {
    sendTelegramMessage(chatId, "–û—à–∏–±–∫–∞: " + err.toString());
  }
}

function handleAddTask(chatId, input) {
  const parts = input.match(/^([^[]+?)\s+(\d{1,2}:\d{2})\s+([HML])\s+(.+)$/);
  if (!parts) {
    sendTelegramMessage(chatId, "–§–æ—Ä–º–∞—Ç: /add –ó–∞–¥–∞—á–∞ 10:30 H DataEng");
    return;
  }

  const [_, title, timeStr, priority, category] = parts;
  const now = new Date();
  const [hours, minutes] = timeStr.split(':').map(Number);
  const eventDate = new Date(now.getFullYear(), now.getMonth(), now.getDate(), hours, minutes);

  // –°–æ–∑–¥–∞—ë–º —Å–æ–±—ã—Ç–∏–µ –≤ Calendar
  const event = CalendarApp.getCalendarById(CALENDAR_ID).createEvent(
    `[${priority}] ${title}`,
    eventDate,
    new Date(eventDate.getTime() + 30 * 60000), // +30 –º–∏–Ω
    { description: `#${category}\nID:${Date.now()}` }
  );

  // –ó–∞–ø–∏—Å—ã–≤–∞–µ–º –≤ Sheets
  const sheet = SpreadsheetApp.openById(SHEET_ID).getSheets()[0];
  const id = Date.now().toString();
  sheet.appendRow([
    id,
    title.trim(),
    category.trim(),
    priority,
    eventDate,
    "", // Actual Start ‚Äî –ø—É—Å—Ç–æ
    "", // Done At
    "", // Duration
    "planned",
    "",
    ""
  ]);

  sendTelegramMessage(chatId, `‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ: ${title} –≤ ${timeStr} (${priority}) ‚Äî ID: ${id.slice(-6)}`);
}

function handleToday(chatId) {
  const today = new Date();
  today.setHours(0, 0, 0, 0);
  const endOfDay = new Date(today);
  endOfDay.setDate(endOfDay.getDate() + 1);

  const events = CalendarApp.getCalendarById(CALENDAR_ID)
    .getEvents(today, endOfDay)
    .filter(e => e.getTitle().includes('['));

  if (events.length === 0) {
    sendTelegramMessage(chatId, "–°–µ–≥–æ–¥–Ω—è –∑–∞–¥–∞—á –Ω–µ—Ç.");
    return;
  }

  let msg = "üìÖ –°–µ–≥–æ–¥–Ω—è:\n";
  events.forEach(e => {
    const title = e.getTitle().replace(/\[.\] /, '');
    const time = Utilities.formatDate(e.getStartTime(), "GMT+3", "HH:mm");
    const desc = e.getDescription();
    const idMatch = desc.match(/ID:(\d+)/);
    const id = idMatch ? idMatch[1].slice(-6) : "‚Äì";
    msg += `\n${time} ‚Äî ${title} (ID: ${id})`;
  });
  sendTelegramMessage(chatId, msg);
}

function handleDone(chatId, shortId) {
  if (!/^\d{6}$/.test(shortId)) {
    sendTelegramMessage(chatId, "–£–∫–∞–∂–∏ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 6 —Ü–∏—Ñ—Ä ID (–∏–∑ /today)");
    return;
  }

  const sheet = SpreadsheetApp.openById(SHEET_ID).getSheets()[0];
  const data = sheet.getDataRange().getValues();
  let foundRow = -1;
  for (let i = 1; i < data.length; i++) {
    if (data[i][0].toString().endsWith(shortId)) {
      foundRow = i + 1;
      break;
    }
  }

  if (foundRow === -1) {
    sendTelegramMessage(chatId, "ID –Ω–µ –Ω–∞–π–¥–µ–Ω.");
    return;
  }

  const doneTime = new Date();
  sheet.getRange(foundRow, 7).setValue(doneTime); // Done At
  sheet.getRange(foundRow, 9).setValue("done");  // Status

  // –ü—Ä–æ—Å—Ç–æ–π –ø–æ–¥—Å—á—ë—Ç –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ (–µ—Å–ª–∏ –µ—Å—Ç—å planned start)
  const plannedStart = sheet.getRange(foundRow, 5).getValue();
  if (plannedStart) {
    const durationMin = Math.round((doneTime - new Date(plannedStart)) / 60000);
    sheet.getRange(foundRow, 8).setValue(Math.max(0, durationMin));
  }

  sendTelegramMessage(chatId, `‚úÖ –ó–∞–¥–∞—á–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞!`);
}

// === TELEGRAM API ===
function sendTelegramMessage(chatId, text) {
  const url = `https://api.telegram.org/bot${TELEGRAM_BOT_TOKEN}/sendMessage`;
  const payload = {
    method: "post",
    contentType: "application/json",
    payload: JSON.stringify({ chat_id: chatId, text: text, parse_mode: "HTML" })
  };
  UrlFetchApp.fetch(url, payload);
}

// === –ï–ñ–ï–ù–ï–î–ï–õ–¨–ù–´–ô –û–¢–ß–Å–¢ (–∑–∞–ø—É—Å–∫–∞—Ç—å –ø–æ —Ç—Ä–∏–≥–≥–µ—Ä—É –∫–∞–∂–¥–æ–µ –≤–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ –≤ 20:00) ===
function sendWeeklyReport() {
  const sheet = SpreadsheetApp.openById(SHEET_ID).getSheets()[0];
  const data = sheet.getDataRange().getValues();
  const now = new Date();
  const startOfWeek = new Date(now);
  startOfWeek.setDate(now.getDate() - now.getDay()); // –≤–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ –∫–∞–∫ –Ω–∞—á–∞–ª–æ –Ω–µ–¥–µ–ª–∏
  startOfWeek.setHours(0, 0, 0, 0);

  let total = 0, done = 0, hours = 0;
  const catCount = {};

  for (let i = 1; i < data.length; i++) {
    const planned = data[i][4];
    if (!planned || !(planned instanceof Date) || planned < startOfWeek) continue;
    total++;
    if (data[i][8] === "done") {
      done++;
      const dur = data[i][7];
      if (typeof dur === "number") hours += dur / 60;
      const cat = data[i][2];
      catCount[cat] = (catCount[cat] || 0) + 1;
    }
  }

  const topCat = Object.entries(catCount).sort((a, b) => b[1] - a[1])[0];
  const msg = `üìà –ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω—ã–π –æ—Ç—á—ë—Ç:\n` +
    `–í—Å–µ–≥–æ –∑–∞–¥–∞—á: ${total}\n` +
    `–í—ã–ø–æ–ª–Ω–µ–Ω–æ: ${done} (${total ? Math.round(done/total*100) : 0}%) \n` +
    `–ü–æ—Ç—Ä–∞—á–µ–Ω–æ: ${hours.toFixed(1)} —á\n` +
    (topCat ? `–¢–æ–ø-–∫–∞—Ç–µ–≥–æ—Ä–∏—è: ${topCat[0]} (${topCat[1]})` : "");

  // –û—Ç–ø—Ä–∞–≤–∏—Ç—å –≤ Telegram ‚Äî –Ω—É–∂–Ω–æ –∑–Ω–∞—Ç—å chat_id
  // –ß—Ç–æ–±—ã –µ–≥–æ –ø–æ–ª—É—á–∏—Ç—å: –Ω–∞–ø–∏—à–∏ –±–æ—Ç—É –ª—é–±–æ–π —Ç–µ–∫—Å—Ç ‚Üí –∑–∞–π–¥–∏ –≤ https://api.telegram.org/bot<TOKEN>/getUpdates
  const YOUR_CHAT_ID = '–¢–í–û–ô_CHAT_ID'; // ‚Üê –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û –∑–∞–º–µ–Ω–∏—Ç—å!
  sendTelegramMessage(YOUR_CHAT_ID, msg);
}
```

---

#### üîß –®–ê–ì 3: –ù–∞—Å—Ç—Ä–æ–π Google Sheets
1. –°–æ–∑–¥–∞–π –Ω–æ–≤—ã–π Google Sheet ‚Üí –Ω–∞–∑–æ–≤–∏ ¬´TaskTracker¬ª
2. –í –ø–µ—Ä–≤–æ–π —Å—Ç—Ä–æ–∫–µ –≤–≤–µ–¥–∏ –∑–∞–≥–æ–ª–æ–≤–∫–∏:
   ```
   ID	Task	Category	Priority	Planned Start	Actual Start	Done At	Duration (min)	Status	Notes	Media Link
   ```
3. –°–∫–æ–ø–∏—Ä—É–π **ID —Ñ–∞–π–ª–∞** –∏–∑ URL:  
   `https://docs.google.com/spreadsheets/d/`**`1Abc...XyZ`**`/edit#gid=0` ‚Üí –≤—Å—Ç–∞–≤—å –≤–º–µ—Å—Ç–æ `SHEET_ID`

#### üîß –®–ê–ì 4: –ù–∞—Å—Ç—Ä–æ–π Telegram Webhook
1. –í Apps Script: **Deploy ‚Üí New deployment ‚Üí Web app**
   - Who has access: **Only myself**
   - Execute as: **Me**
   - Deploy ‚Üí —Å–∫–æ–ø–∏—Ä—É–π **Web app URL**
2. –í Telegram –æ—Ç–ø—Ä–∞–≤—å –∑–∞–ø—Ä–æ—Å (–≤ –±—Ä–∞—É–∑–µ—Ä–µ):
   ```
   https://api.telegram.org/bot<–í–ê–®_–¢–û–ö–ï–ù>/setWebhook?url=<–í–ê–®_WEB_APP_URL>
   ```
   (–±–µ–∑ `< >`, URL –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤–∞–ª–∏–¥–Ω—ã–º)

> ‚úÖ –¢–µ–ø–µ—Ä—å –±–æ—Ç –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –∫–æ–º–∞–Ω–¥—ã!

#### üîß –®–ê–ì 5: –ù–∞—Å—Ç—Ä–æ–π –µ–∂–µ–Ω–µ–¥–µ–ª—å–Ω—ã–π –æ—Ç—á—ë—Ç
1. –í Apps Script: **Editors ‚Üí Triggers (—á–∞—Å–∏–∫ —Å–ø—Ä–∞–≤–∞)**
2. –î–æ–±–∞–≤—å —Ç—Ä–∏–≥–≥–µ—Ä:
   - Function: `sendWeeklyReport`
   - Event source: **Time-driven**
   - Type: **Week timer**
   - Day: **Sunday**
   - Time: **20:00**

> ‚ö†Ô∏è –ù–µ –∑–∞–±—É–¥—å –≤—Å—Ç–∞–≤–∏—Ç—å —Å–≤–æ–π `YOUR_CHAT_ID` –≤ —Ñ—É–Ω–∫—Ü–∏—é `sendWeeklyReport`!  
> –ß—Ç–æ–±—ã —É–∑–Ω–∞—Ç—å –µ–≥–æ: –Ω–∞–ø–∏—à–∏ –±–æ—Ç—É —á—Ç–æ-–Ω–∏–±—É–¥—å ‚Üí –∑–∞–π–¥–∏ –≤  
> `https://api.telegram.org/bot<–¢–û–ö–ï–ù>/getUpdates` ‚Üí –Ω–∞–π–¥–∏ `"chat":{"id":123456789}`

---

### üí• –¢–í–û–ô –°–õ–ï–î–£–Æ–©–ò–ô –®–ê–ì ‚Äî –°–ï–ô–ß–ê–°

1. **–ó–∞ 60 –º–∏–Ω—É—Ç** —Å–æ–∑–¥–∞–π –±–æ—Ç–∞, Sheet, –≤—Å—Ç–∞–≤—å –∫–æ–¥, –Ω–∞—Å—Ç—Ä–æ–π webhook.
2. **–°–µ–≥–æ–¥–Ω—è –∂–µ** –¥–æ–±–∞–≤—å –ø–µ—Ä–≤—É—é –∑–∞–¥–∞—á—É:  
   `/add –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É —Å–∏—Å—Ç–µ–º—ã 20:00 H Setup`
3. **–°—Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—Ä—É–π —ç–∫—Ä–∞–Ω —Å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ–º** –∏ –ø—Ä–∏—à–ª–∏ —Å–µ–±–µ –≤ Telegram ‚Äî —ç—Ç–æ –¥–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–æ, —á—Ç–æ —Ç—ã **–Ω–µ —É—à—ë–ª –≤ –∞–Ω–∞–ª–∏–∑ –ø–∞—Ä–∞–ª–∏—á–∞**.

–ï—Å–ª–∏ –Ω–µ —Å–¥–µ–ª–∞–µ—à—å ‚Äî —ç—Ç–æ –Ω–µ –ø—Ä–æ–≤–∞–ª —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏. –≠—Ç–æ –ø—Ä–æ–≤–∞–ª **—Ä–µ—à–∏–º–æ—Å—Ç–∏**.  
–ê —É –º–Ω–æ–≥–æ–¥–µ—Ç–Ω–æ–≥–æ –æ—Ç—Ü–∞ —Å –†–° **–Ω–µ—Ç –ø—Ä–∞–≤–∞ –Ω–∞ —Ä–æ—Å–∫–æ—à—å –±—ã—Ç—å –Ω–µ—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–º**.

–ì–æ—Ç–æ–≤ –æ—Ç–≤–µ—Ç–∏—Ç—å –Ω–∞ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –≤–æ–ø—Ä–æ—Å—ã –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ ‚Äî –Ω–æ —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ —Ç—ã **—É–∂–µ –Ω–∞—á–∞–ª**.
