

## **Модуль 1. Введение в системы наблюдаемости**
- Что такое observability: логи, метрики, трейсы
- Сравнение парадигм: централизованное логирование, SIEM, observability
- Требования к платформам хранения и анализа
- Обзор экосистем: Elastic Stack vs OpenSearch vs Grafana Loki

---

## **Модуль 2. Архитектура ELK-стека**
- Назначение и компоненты: Elasticsearch, Logstash, Beats, Kibana
- Роль каждого компонента в пайплайне
- Интеграция с инфраструктурой: Docker, Kubernetes, облачные провайдеры
- Альтернативы: Fluent Bit, Vector, Promtail, OpenTelemetry

---

## **Модуль 3. Сбор и обработка логов**
- Pull vs Push модели сбора
- Использование Filebeat, Metricbeat, Journalbeat
- Парсинг логов: Grok, dissect, JSON, multiline
- Пайплайны в Logstash и Vector
- Пример: парсинг Nginx-логов с извлечением `user_id`, `request_url`, `response_time`

---

## **Модуль 4. Mapping, Dynamic Templates и типы данных**
- Основы маппинга: явный vs динамический
- Категории типов данных: `text`, `keyword`, `date`, `nested`, `wildcard`
- Dynamic templates: управление автоматическим маппингом
- Multi-fields: одновременное использование `text` и `keyword`
- Best practices: оптимизация под агрегации, поиск и хранение

---

## **Модуль 5. Хранение и масштабирование**
- Принципы шардирования и репликации
- Hot-Warm-Cold-Frozen архитектура
- Index Lifecycle Management (ILM)
- Сравнение подходов: Elasticsearch vs Loki (на основе кейса Badoo, 2020)
- Управление потреблением памяти и дискового пространства

---

## **Модуль 6. Поиск и анализ в Kibana**
- Интерфейс Discover: фильтрация, сортировка, экспорт
- Создание визуализаций: гистограммы, таблицы, pie charts
- Построение дашбордов
- Использование Lens для быстрого анализа
- Расширенные запросы: Lucene, Painless scripts

---

## **Модуль 7. Алертинг и машинное обучение**
- Настройка правил оповещения в Kibana
- Алертинг по логам: шаблоны ошибок, rate-метрики
- Интеграция с Slack, PagerDuty, Email
- Встроенные ML-функции Elasticsearch:
  - Автообнаружение аномалий
  - Прогнозирование трендов
  - Кластеризация поведения

---

## **Модуль 8. Structured Logging и контракты событий**
- Преимущества структурированных логов
- Проектирование контрактов: общие, прикладные, access-логи
- Использование `@timestamp`, `service`, `host`, `trace_id`
- Обезличенные сообщения (generic messages)
- Снижение кардинальности и повышение эффективности поиска

---

## **Модуль 9. Интеграция с другими системами**
- Связь логов и метрик: сквозная корреляция
- Использование Logstash как брокера
- Интеграция с Kafka, Redis, S3
- Отправка данных в Prometheus через Logstash или Vector
- Unified Pipeline: один путь для всех типов телеметрии

---

## **Модуль 10. Миграция, мониторинг и производительность**
- Миграция с ELK на OpenSearch или Loki
- Мониторинг самого стека: состояние узлов, heap usage, задержки
- Диагностика узких мест: медленные запросы, высокая нагрузка на I/O
- Best practices для production-сред
- Резервное копирование и восстановление: snapshots

---

## **Лабораторные работы (практическая часть)**
1. Развертывание ELK-стека в Docker/Kubernetes
2. Настройка Filebeat для сбора Nginx и Java-логов
3. Создание пайплайна Logstash с парсингом и enrich-операциями
4. Проектирование mapping и dynamic templates
5. Построение дашборда в Kibana с алертами
6. Настройка ILM-политики для ротации индексов
7. Реализация structured logging в микросервисе (Python/Java)
8. Интеграция с Prometheus и Alertmanager

---

## **Дополнительные материалы**
- [Badoo, 2020] *«Grafana Loki: альтернатива ELK?»* — сравнение стоимости и производительности
- Официальная документация Elastic и Grafana
- Видео: *“How Loki Correlates Metrics and Logs”*, DevOpsDays 2019
- Шаблоны конфигураций: Filebeat, Logstash, Kibana dashboards

---

> **Автор курса**: Valeriy Makurin  
> **Цель курса**: подготовить инженеров к проектированию, внедрению и сопровождению современных систем наблюдаемости на базе ELK-стека и смежных технологий.

Если нужно — могу предоставить **презентацию в PDF**, **рабочие тетради для студентов** или **тесты по каждому модулю**.
